language: python
python:
- 2.7
env:
  matrix:
  - DOCKER_CONTENT_TRUST=0
  global:
  - secure: gjIMpng7Kkb8p1dwL37UteYmeaErv/k8SrL9k/XyJbwPwTGhB6pmeEqN2oO4sEuhMK67m+aljQqKrjCCocRWCmk8NVm88sjbR8NmwX3ez9WyAs3fkoGUMGuYeTgueM5rT9Rb3nR8BAlIkJ7lvaxdHLvRcLBYiiwCaRd3zMhx238X5PNxpRsMSnbnvD4B91jim4QEypv15TzuHJFU6ZCvVOs0wyYB1reV0+jdjGjS0fyUzqq4rZ4eB6zp3A3oVBsVKUbzYPGUkE9T6d0LJ58ahiKWfsvAEjTnjOxA/NTUw4Dll5bCWiQlP/MojJDOnsvn5/lG2oIwHEHa3tJ5YcdaUle2kNE5FAe9d4EH2rFxrXFCPp9+hSBafcEsROTDMsddK3SkjjFVo26Hepwzgej51dslGwfBwye5R2G1HSenUd0EcMCjPzIFT75z4kiDkuT1MnJkcKIL0f9CX+Z63MMXdcjGz2nDg+O8QMjvwlFEDGnVWYfW7dXBncdmDaAmHimzz7xH9O6HZ99wH4/4CyvKP/696w49/Oghvn9eDIa+lFbGKFZiOAls5gQTbQmY+b4cgeskpEM5o6P2BKkGxdJZv1rE9Z2dH9ztQPQEltwIBN+AhyezZiYXSvDxJ+86LQar7g2vcBbymqbygk7yswG0MsmvvIQj51ouV2E6pWhVWpo=
  - secure: TQ9t6oYFeU82tRj/7cNc2g/QTpQAT/rStBxy90RdeGsf6vUr/OOb9UBemcX4ztI+HN59Z0YqoolZrHPSfJU61VwcacW4wK0bpi/7LLhFG7EIkW7T3i64z9ukj/f3XlPNE0421+C3s/EN6ND5oy7qbSIoL3bzaU9X7NW1wFk6dOocWTwCQwuiOk5GZLs1CCiDQko6/IdNHvKPdB8rftEknPT+rimnxP/VgctrB6OX8TztwQMsFXNVnm2sBWjR7OvA9RTrQlTsl/zgCss4sbC5q+wG7NTP5CDQ5pnbGVMjzkJzp8wCLYBurvKtHf79PfXBdInOA2xRUfrNlgsWxItiu/qIRndtQigxTMMFxrD1KOGVikkBvu8XnxJDNZ+ntSbEcxpDT51mdA2P2c3rIUPdso/BiKIawSmqBJnNn8FXhxBvO0cMJ7sZBf98OxEYY2C3bLQ4v0o031eNjMliSI3p0vI8hvFbU0VnYcGlrIvtY3sRyAl6foNOYnxICw6JMk7EtAodpuAo+toKO4rG1coQVprXLuo6Nv1aSfV7zHPG1Y7/VfFxGBYOjRyqzkySDnyU+SxJSHVblUflk+Q5Z2Jz8Cryi672sQQ5/gT53LFiqCQkmZvbKmhSqNpraPao3s50PvBnYowtv8v8qAFtBm9mcVocHR9g21v30NTVDj8t55k=
services:
- docker
before_install:
- sudo apt-get update
- docker-compose --version
- pip install docker-compose --upgrade
- docker-compose --version
install:
- cd v1_6_7
- docker-compose build
- docker-compose up -d
- docker-compose ps
- docker exec --user=oscar -it oscar /sandbox.sh
before_script:
- pip install requests
- pip install docker
- cd $TRAVIS_BUILD_DIR
script:
- bash ./.travis/linters.sh
- python tests.py
notifications:
  slack:
    rooms:
    - optimum-team:GycletOWK4Kt95GktwYwfUMp#build
after_success:
- cd $TRAVIS_BUILD_DIR/v1_6_7
- echo "$DOCKER_PASS" | docker login -u "$DOCKER_USER" --password-stdin
- docker-compose images
- docker push trydirect/django-oscar:1.6.7
